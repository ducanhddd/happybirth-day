<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dot Matrix Countdown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  body {
      margin: 0; padding: 0;
      background: #000;
      min-height: 100vh;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
  }
  .dotmatrix-wrap {
      position: relative;
      width: min(80vw, 480px);
      height: min(80vw, 480px);
      display: flex; align-items: center; justify-content: center;
  }
  .dotmatrix-grid {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      display: grid;
      grid-template-columns: repeat(24, 1fr);
      grid-template-rows: repeat(24, 1fr);
      width: 100%; height: 100%;
      z-index: 2;
      pointer-events: none;
      transition: opacity 0.3s;
  }
  .dotmatrix-dot {
      width: 1vw; height: 1vw;
      min-width: 4px; min-height: 4px;
      max-width: 14px; max-height: 14px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.12;
      box-shadow: 0 1px 3px #aaa8;
      transition: opacity 0.18s, background 0.2s;
      margin: 0;
  }
  .dotmatrix-dot.on {
      background: #fff;
      opacity: 1;
      box-shadow: 0 0 6px #fff, 0 0 10px #fff2;
      transition: opacity 0.18s, background 0.18s, box-shadow 0.2s;
  }
  /* Dot grid máº·t pháº³ng 3D bÃªn dÆ°á»›i */
  .plane-dot-grid {
      position: absolute;
      left: 50%; top: 72%;
      transform: translate(-50%,0) scaleX(1.11) perspective(400px) rotateX(62deg);
      display: grid;
      grid-template-columns: repeat(32, 1fr);
      grid-template-rows: repeat(8, 1fr);
      width: 75vw;
      max-width: 900px;
      height: 13vw;
      max-height: 150px;
      z-index: 1;
      pointer-events: none;
      opacity: 0.45;
  }
  .plane-dot {
      width: 0.3vw; height: 0.3vw;
      min-width: 1.5px; min-height: 1.5px;
      max-width: 5px; max-height: 5px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.14;
      box-shadow: 0 1px 3px #fff4;
  }
  @media (max-width: 600px) {
      .dotmatrix-wrap { width: 98vw; height: 98vw;}
      .plane-dot-grid { width: 99vw; height: 18vw;}
  }
  </style>
</head>
<body>
<div class="dotmatrix-wrap">
    <div id="dotmatrix" class="dotmatrix-grid"></div>
    <div class="plane-dot-grid" id="plane-dot-grid"></div>
</div>
<script>
// Bitmap sá»‘ 3, 2, 1 cho dot matrix 24x24
const NUM_BITMAP = {
  3: [
    "000111111110000000000000",
    "001111111111100000000000",
    "011100000011110000000000",
    "011000000001110000000000",
    "000000000000111000000000",
    "000000000000111000000000",
    "000000000001110000000000",
    "000000000111100000000000",
    "000001111111000000000000",
    "000001111111000000000000",
    "000000000011100000000000",
    "000000000001110000000000",
    "000000000000111000000000",
    "000000000000111000000000",
    "011000000001110000000000",
    "011100000011110000000000",
    "001111111111100000000000",
    "000111111110000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ],
  2: [
    "000011111111000000000000",
    "000111111111100000000000",
    "001110000011110000000000",
    "011100000001110000000000",
    "011000000001110000000000",
    "000000000011100000000000",
    "000000000111100000000000",
    "000000001111000000000000",
    "000000011110000000000000",
    "000000111100000000000000",
    "000001111000000000000000",
    "000011110000000000000000",
    "000111000000000000000000",
    "001110000000000000000000",
    "011100000000000000000000",
    "011000000000000000000000",
    "011111111111111000000000",
    "011111111111111000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ],
  1: [
    "000000111100000000000000",
    "000001111100000000000000",
    "000011111100000000000000",
    "000111111100000000000000",
    "000111111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "011111111111110000000000",
    "011111111111110000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ]
};
const dotN = 24;
const dotmatrix = document.getElementById('dotmatrix');

// Create dot matrix grid only once!
const dots = [];
for(let r=0; r<dotN; r++){
    for(let c=0; c<dotN; c++){
        let dot = document.createElement("div");
        dot.className = "dotmatrix-dot";
        dotmatrix.appendChild(dot);
        dots.push(dot);
    }
}

function showNumber(n) {
    const bitmap = NUM_BITMAP[n];
    for(let r=0; r<dotN; r++){
        for(let c=0; c<dotN; c++){
            const idx = r*dotN + c;
            if(bitmap && bitmap[r][c]==="1"){
                dots[idx].classList.add('on');
            } else {
                dots[idx].classList.remove('on');
            }
        }
    }
}

// Plane dot grid (máº·t pháº³ng cháº¥m bÃªn dÆ°á»›i)
const planeGrid = document.getElementById("plane-dot-grid");
for(let r=0; r<8; r++)
    for(let c=0; c<32; c++){
        let dot = document.createElement("div");
        dot.className = "plane-dot";
        planeGrid.appendChild(dot);
    }

// Äáº¿m ngÆ°á»£c
const countdowns = [3,2,1];
let idx = 0;
function nextCount(){
    if(idx < countdowns.length){
        showNumber(countdowns[idx]);
        idx++;
        setTimeout(nextCount, 1100);
    } else {
        // Háº¿t Ä‘áº¿m ngÆ°á»£c, hiá»‡n DONE hoáº·c hiá»‡u á»©ng khÃ¡c
        dotmatrix.innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><span style="font-size:2.5em;color:#fff;text-shadow:0 0 32px #fff;">ðŸŽ‰ ChÃºc má»«ng sinh nháº­t! ðŸŽ‰</span></div>';
    }
}
window.onload = nextCount;
</script>
</body>
</html>
