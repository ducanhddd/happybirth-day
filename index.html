<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dot Matrix Countdown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
  body {
      margin: 0; padding: 0;
      background: #000;
      min-height: 100vh;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
  }
  .dotmatrix-wrap {
      position: relative;
      width: min(80vw, 480px);
      height: min(80vw, 480px);
      display: flex; align-items: center; justify-content: center;
  }
  .dotmatrix-grid {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      display: grid;
      grid-template-columns: repeat(24, 1fr);
      grid-template-rows: repeat(24, 1fr);
      width: 100%; height: 100%;
      z-index: 2;
      pointer-events: none;
      transition: opacity 0.3s;
  }
  .dotmatrix-dot {
      width: 1.8vw; height: 1.8vw;
      min-width: 8px; min-height: 8px;
      max-width: 21px; max-height: 21px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.13;
      box-shadow: 0 1px 3px #aaa8;
      transition: opacity 0.18s, background 0.2s;
  }
  .dotmatrix-dot.on {
      background: #fff;
      opacity: 1;
      box-shadow: 0 0 8px #fff, 0 0 16px #fff2;
      transition: opacity 0.18s, background 0.18s, box-shadow 0.2s;
  }
  /* Dot grid m·∫∑t ph·∫≥ng 3D b√™n d∆∞·ªõi */
  .plane-dot-grid {
      position: absolute;
      left: 50%; top: 72%;
      transform: translate(-50%,0) scaleX(1.11) perspective(400px) rotateX(62deg);
      display: grid;
      grid-template-columns: repeat(32, 1fr);
      grid-template-rows: repeat(8, 1fr);
      width: 75vw;
      max-width: 900px;
      height: 13vw;
      max-height: 150px;
      z-index: 1;
      pointer-events: none;
      opacity: 0.45;
  }
  .plane-dot {
      width: 0.48vw; height: 0.48vw;
      min-width: 2.4px; min-height: 2.4px;
      max-width: 7px; max-height: 7px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.18;
      box-shadow: 0 1px 3px #fff4;
  }
  @media (max-width: 600px) {
      .dotmatrix-wrap { width: 98vw; height: 98vw;}
      .plane-dot-grid { width: 99vw; height: 18vw;}
  }
  </style>
</head>
<body>
<div class="dotmatrix-wrap">
    <div id="dotmatrix" class="dotmatrix-grid"></div>
    <div class="plane-dot-grid" id="plane-dot-grid"></div>
</div>
<script>
// Bitmap s·ªë 3, 2, 1 cho dot matrix 24x24 (t·∫°o b·∫±ng generator ho·∫∑c chuy·ªÉn t·ª´ ·∫£nh)
// ƒê·ªÉ t·ªëi ∆∞u, ch·ªâ b·∫≠t ch·∫•m ·ªü v√πng gi·ªØa (c·ªôt 4-20, d√≤ng 4-20)
const NUM_BITMAP = {
  3: [
    "000111111110000000000000",
    "001111111111100000000000",
    "011100000011110000000000",
    "011000000001110000000000",
    "000000000000111000000000",
    "000000000000111000000000",
    "000000000001110000000000",
    "000000000111100000000000",
    "000001111111000000000000",
    "000001111111000000000000",
    "000000000011100000000000",
    "000000000001110000000000",
    "000000000000111000000000",
    "000000000000111000000000",
    "011000000001110000000000",
    "011100000011110000000000",
    "001111111111100000000000",
    "000111111110000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ],
  2: [
    "000011111111000000000000",
    "000111111111100000000000",
    "001110000011110000000000",
    "011100000001110000000000",
    "011000000001110000000000",
    "000000000011100000000000",
    "000000000111100000000000",
    "000000001111000000000000",
    "000000011110000000000000",
    "000000111100000000000000",
    "000001111000000000000000",
    "000011110000000000000000",
    "000111000000000000000000",
    "001110000000000000000000",
    "011100000000000000000000",
    "011000000000000000000000",
    "011111111111111000000000",
    "011111111111111000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ],
  1: [
    "000000111100000000000000",
    "000001111100000000000000",
    "000011111100000000000000",
    "000111111100000000000000",
    "000111111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "000000111100000000000000",
    "011111111111110000000000",
    "011111111111110000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000",
    "000000000000000000000000"
  ]
};
const dotN = 24;
const dotmatrix = document.getElementById('dotmatrix');

// Create dot matrix grid only once!
const dots = [];
for(let r=0; r<dotN; r++){
    for(let c=0; c<dotN; c++){
        let dot = document.createElement("div");
        dot.className = "dotmatrix-dot";
        dotmatrix.appendChild(dot);
        dots.push(dot);
    }
}

function showNumber(n) {
    const bitmap = NUM_BITMAP[n];
    for(let r=0; r<dotN; r++){
        for(let c=0; c<dotN; c++){
            const idx = r*dotN + c;
            if(bitmap && bitmap[r][c]==="1"){
                dots[idx].classList.add('on');
            } else {
                dots[idx].classList.remove('on');
            }
        }
    }
}

// Plane dot grid (m·∫∑t ph·∫≥ng ch·∫•m b√™n d∆∞·ªõi)
const planeGrid = document.getElementById("plane-dot-grid");
for(let r=0; r<8; r++)
    for(let c=0; c<32; c++){
        let dot = document.createElement("div");
        dot.className = "plane-dot";
        planeGrid.appendChild(dot);
    }

// ƒê·∫øm ng∆∞·ª£c
const countdowns = [3,2,1];
let idx = 0;
function nextCount(){
    if(idx < countdowns.length){
        showNumber(countdowns[idx]);
        idx++;
        setTimeout(nextCount, 1100);
    } else {
        // H·∫øt ƒë·∫øm ng∆∞·ª£c, hi·ªán DONE ho·∫∑c hi·ªáu ·ª©ng kh√°c
        dotmatrix.innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><span style="font-size:2.5em;color:#fff;text-shadow:0 0 32px #fff;">üéâ Ch√∫c m·ª´ng sinh nh·∫≠t! üéâ</span></div>';
    }
}
window.onload = nextCount;
</script>
</body>
</html>
